-- Sequences
CREATE SEQUENCE IF NOT EXISTS integration_platforms_id_seq;

-- Create enum type (availability_status)
DO $$
BEGIN
    IF NOT EXISTS (SELECT 1 FROM pg_type WHERE typname = 'availability_status') THEN
        CREATE TYPE availability_status AS ENUM (
            'available', 
            'not_available', 
            'soon'
        );
    END IF;
END$$;

-- Table Definition
CREATE TABLE integration_platforms(
    "id" int8 NOT NULL DEFAULT nextval('integration_platforms_id_seq'::regclass),
    "platform" varchar NOT NULL,
    "label" varchar,
    "gateway" varchar,
    "required_fields" json,
    "gateway_requirements" text,
    "is_ready" bool NOT NULL DEFAULT false,
    "enabled" bool NOT NULL DEFAULT false,
    "created_at" timestamptz,
    "updated_at" timestamptz,
    "integration_abilities" json NOT NULL DEFAULT '[{"key":"create_awbs_api","label_en":"Create AWBs API","label_ar":"\u062a\u0641\u0639\u064a\u0644 \u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u0634\u062d\u0646\u0627\u062a \u0639\u0646 \u0637\u0631\u064a\u0642 \u0627\u0644\u0631\u0628\u0637 \u0627\u0644\u062d\u0627\u0644\u064a","default":true,"form_field":{"type":"boolean_toggle","name":"create_awbs_api","label_en":"Create AWBs API","label_ar":"\u062a\u0641\u0639\u064a\u0644 \u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u0634\u062d\u0646\u0627\u062a \u0639\u0646 \u0637\u0631\u064a\u0642 \u0627\u0644\u0631\u0628\u0637 \u0627\u0644\u062d\u0627\u0644\u064a","def_value":true,"showInCreate":true,"showInUpdate":true,"validationRules":["nullable"],"helpText":null}},{"key":"create_awbs_excel","label_en":"Create AWBs Excel","label_ar":"\u062a\u0641\u0639\u064a\u0644 \u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u0634\u062d\u0646\u0627\u062a \u0639\u0646 \u0637\u0631\u064a\u0642 \u0645\u0644\u0641 \u0625\u0643\u0633\u0644","default":false,"form_field":{"type":"boolean_toggle","name":"create_awbs_excel","label_en":"Create AWBs Excel","label_ar":"\u062a\u0641\u0639\u064a\u0644 \u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u0634\u062d\u0646\u0627\u062a \u0639\u0646 \u0637\u0631\u064a\u0642 \u0645\u0644\u0641 \u0625\u0643\u0633\u0644","def_value":false,"showInCreate":true,"showInUpdate":true,"validationRules":["nullable"],"helpText":null}},{"key":"update_destination_order_status","label_en":"Update Destination Order Status","label_ar":"\u0645\u0632\u0627\u0645\u0646\u0629 \u062d\u0627\u0644\u0629 \u0627\u0644\u0637\u0644\u0628 \u0639\u0644\u0649 \u0627\u0644\u0645\u062a\u062c\u0631 \u0645\u0639 \u062d\u0627\u0644\u0629 \u062a\u062a\u0628\u0639 \u0627\u0644\u0634\u062d\u0646\u0629 \u0639\u0644\u0649 \u0628\u0648\u0644\u064a\u0635\u0629","default":true,"form_field":{"type":"boolean_toggle","name":"update_destination_order_status","label_en":"Update Destination Order Status","label_ar":"\u0645\u0632\u0627\u0645\u0646\u0629 \u062d\u0627\u0644\u0629 \u0627\u0644\u0637\u0644\u0628 \u0639\u0644\u0649 \u0627\u0644\u0645\u062a\u062c\u0631 \u0645\u0639 \u062d\u0627\u0644\u0629 \u062a\u062a\u0628\u0639 \u0627\u0644\u0634\u062d\u0646\u0629 \u0639\u0644\u0649 \u0628\u0648\u0644\u064a\u0635\u0629","def_value":true,"showInCreate":true,"showInUpdate":true,"validationRules":["nullable"],"helpText":null}},{"key":"update_destination_shipment_status","label_en":"Update Destination Shipment Status","label_ar":"\u0645\u0632\u0627\u0645\u0646\u0629 \u062d\u0627\u0644\u0629 \u0627\u0644\u0634\u062d\u0646\u0629 \u0639\u0644\u0649 \u0627\u0644\u0645\u062a\u062c\u0631 \u0645\u0639 \u062d\u0627\u0644\u0629 \u0627\u0644\u0634\u062d\u0646\u0629 \u0639\u0644\u0649 \u0628\u0648\u0644\u064a\u0635\u0629","default":true,"form_field":{"type":"boolean_toggle","name":"update_destination_shipment_status","label_en":"Update Destination Shipment Status","label_ar":"\u0645\u0632\u0627\u0645\u0646\u0629 \u062d\u0627\u0644\u0629 \u0627\u0644\u0634\u062d\u0646\u0629 \u0639\u0644\u0649 \u0627\u0644\u0645\u062a\u062c\u0631 \u0645\u0639 \u062d\u0627\u0644\u0629 \u0627\u0644\u0634\u062d\u0646\u0629 \u0639\u0644\u0649 \u0628\u0648\u0644\u064a\u0635\u0629","def_value":true,"showInCreate":true,"showInUpdate":true,"validationRules":["nullable"],"helpText":null}},{"key":"set_awb_on_destination","label_en":"Set AWB on Destination","label_ar":"\u0625\u0638\u0647\u0627\u0631 \u0645\u0644\u0641 \u0627\u0644\u0628\u0648\u0644\u064a\u0635\u0629 \u0639\u0644\u0649 \u0627\u0644\u0645\u062a\u062c\u0631","default":true,"form_field":{"type":"boolean_toggle","name":"set_awb_on_destination","label_en":"Set AWB on Destination","label_ar":"\u0625\u0638\u0647\u0627\u0631 \u0645\u0644\u0641 \u0627\u0644\u0628\u0648\u0644\u064a\u0635\u0629 \u0639\u0644\u0649 \u0627\u0644\u0645\u062a\u062c\u0631","def_value":true,"showInCreate":true,"showInUpdate":true,"validationRules":["nullable"],"helpText":null}},{"key":"sync_awb_cancel_with_destination","label_en":"Sync AWB Cancellation or Deletion With Destination","label_ar":"\u0625\u0644\u063a\u0627\u0621 \u0627\u0644\u0637\u0644\u0628 \u0645\u0646 \u0627\u0644\u0645\u0646\u0635\u0629 \u0639\u0646\u062f \u0625\u0644\u063a\u0627\u0621 \u0627\u0644\u0634\u062d\u0646\u0629 \u0645\u0646 \u0628\u0648\u0644\u064a\u0635\u0629","default":false,"form_field":{"type":"boolean_toggle","name":"sync_awb_cancel_with_destination","label_en":"Sync AWB Cancellation or Deletion With Destination","label_ar":"\u0625\u0644\u063a\u0627\u0621 \u0627\u0644\u0637\u0644\u0628 \u0645\u0646 \u0627\u0644\u0645\u0646\u0635\u0629 \u0639\u0646\u062f \u0625\u0644\u063a\u0627\u0621 \u0627\u0644\u0634\u062d\u0646\u0629 \u0645\u0646 \u0628\u0648\u0644\u064a\u0635\u0629","def_value":false,"showInCreate":true,"showInUpdate":true,"validationRules":["nullable"],"helpText":null}},{"key":"accept_pending_orders_without_auto_shipping","label_en":"Accept Pending Orders Without auto Shipping","label_ar":"\u0627\u0633\u062a\u0642\u0628\u0627\u0644 \u062c\u0645\u064a\u0639 \u0627\u0644\u0637\u0644\u0628\u0627\u062a \u0641\u064a \u0627\u0644\u0628\u0648\u0644\u064a\u0635\u0627\u062a \u0627\u0644\u0645\u0639\u0644\u0642\u0629 (\u0639\u062f\u0645 \u0625\u0635\u062f\u0627\u0631 \u0627\u0644\u0628\u0648\u0644\u064a\u0635\u0629 \u062a\u0644\u0642\u0627\u0626\u064a\u0623 \u0639\u0644\u0649 \u0634\u0631\u0643\u0629 \u0627\u0644\u0634\u062d\u0646 \u0627\u0644\u0627\u0641\u062a\u0631\u0627\u0636\u064a\u0629)","default":false,"form_field":{"type":"boolean_toggle","name":"accept_pending_orders_without_auto_shipping","label_en":"Accept Pending Orders Without auto Shipping","label_ar":"\u0627\u0633\u062a\u0642\u0628\u0627\u0644 \u062c\u0645\u064a\u0639 \u0627\u0644\u0637\u0644\u0628\u0627\u062a \u0641\u064a \u0627\u0644\u0628\u0648\u0644\u064a\u0635\u0627\u062a \u0627\u0644\u0645\u0639\u0644\u0642\u0629 (\u0639\u062f\u0645 \u0625\u0635\u062f\u0627\u0631 \u0627\u0644\u0628\u0648\u0644\u064a\u0635\u0629 \u062a\u0644\u0642\u0627\u0626\u064a\u0623 \u0639\u0644\u0649 \u0634\u0631\u0643\u0629 \u0627\u0644\u0634\u062d\u0646 \u0627\u0644\u0627\u0641\u062a\u0631\u0627\u0636\u064a\u0629)","def_value":false,"showInCreate":true,"showInUpdate":true,"validationRules":["nullable"],"helpText":null}},{"key":"auto_override_carrier","label_en":"Auto Override Carrier","label_ar":"\u0627\u0644\u062a\u063a\u064a\u064a\u0631 \u0627\u0644\u062a\u0644\u0642\u0627\u0626\u064a \u0644\u0634\u0631\u0643\u0629 \u0627\u0644\u0634\u062d\u0646 (\u0641\u064a \u062d\u0627\u0644\u0629 \u0641\u0634\u0644 \u0627\u0644\u0625\u0635\u062f\u0627\u0631)","default":false,"form_field":{"type":"boolean_toggle","name":"auto_override_carrier","label_en":"Auto Override Carrier","label_ar":"\u0627\u0644\u062a\u063a\u064a\u064a\u0631 \u0627\u0644\u062a\u0644\u0642\u0627\u0626\u064a \u0644\u0634\u0631\u0643\u0629 \u0627\u0644\u0634\u062d\u0646 (\u0641\u064a \u062d\u0627\u0644\u0629 \u0641\u0634\u0644 \u0627\u0644\u0625\u0635\u062f\u0627\u0631)","def_value":false,"showInCreate":true,"showInUpdate":true,"validationRules":["nullable"],"helpText":null}},{"key":"allow_order_duplication","label_en":"Allow Order Duplication","label_ar":"\u0627\u0644\u0633\u0645\u0627\u062d \u0628\u062a\u0643\u0631\u0627\u0631 \u0627\u0644\u0637\u0644\u0628","default":false,"form_field":{"type":"boolean_toggle","name":"allow_order_duplication","label_en":"Allow Order Duplication","label_ar":"\u0627\u0644\u0633\u0645\u0627\u062d \u0628\u062a\u0643\u0631\u0627\u0631 \u0627\u0644\u0637\u0644\u0628","def_value":false,"showInCreate":true,"showInUpdate":true,"validationRules":["nullable"],"helpText":null}}]'::json,
    "def_store_driver" varchar,
    "reqs_mapper_class" varchar,
    "def_order_proc_method" varchar NOT NULL DEFAULT 'queue_job'::character varying,
    "order_proc_changeable" bool NOT NULL DEFAULT false,
    "img" varchar,
    "public_showable" bool NOT NULL DEFAULT true,
    "video_guide_url" varchar,
    "group_id" int8,
    "img_light" varchar,
    "img_max_height" varchar,
    "availability_status" availability_status NOT NULL DEFAULT 'not_available'::availability_status,
    "guide_docs" jsonb,
    PRIMARY KEY ("id")
);